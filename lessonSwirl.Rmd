---
title: "R Notebook_NoiseproR"
output: html_notebook
---

# Introduction

This R notebook serves to record statistical analysis process (i.e., method, consideration, R script) for noise exposure profiling using R. The objectives are to facilitate review of all statistical method adopted as well as learning to ensure reproducibility of this study in the future.

# Pre-requisite

The following packages need to be installed in order to run the codes provided in this document:

```{r}
install.packages("dplyr")
install.packages("tidyr")
install.packages("ggplot2")
install.packages("knitr")
```

# Data upload

Data extracted from noise exposure reports were recorded in Microsoft Excel spredsheet (Excel). Basic data preparation (i.e., cleaning, clustering, verification of missing data) was done in Excel. Final steps before analysis the data in R was to save the spreadsheet in comma separated format (.csv). The file was saved by the name "noiseprof.csv". Due to confidentiality, the raw data file cannot be attached in this document, however the codes used can be generalized for other applications.


Step 1: Upload dataset ("noiseprof.csv") into R
To upload data frame in .csv use the following function and assign to a new variables (optional). There are many other ways to load data from .csv as explained in YouTube

```{r}
noisedf <- read.csv(noiseprof.csv, na.strings = c("", "NA"))
```

Another way you may consider is to upload your dataset in Excel native file (.xlsx or .xls). In doing so, you are required to install "XLConnect" package from CRAN database. This is a matter of preference and just provide you with the alternative way to upload your dataset into R for further analysis.

```{r}
install.packages("XLConnect") #to install package within R environment
library("XLconnect") #required in every new session to enable functions within the package
```


Step 2: Explore "noiseprof.csv" 
The following are functions which can be used to explore uploaded data frame. Use help function within R to understand the arguments / values required to use respective functions

```{r}
dim() # to have overview of the dataframe (row, column)
head()
tail()
str()

```

# List of variables under study

```{r}
names(noisedf)
```

Selection of specific variables of interest will be explained under Data Cleaning Wrangling using dplyr, tidyr section



Data Cleaning & Wrangling using dplyr, tidyr

Missing data was treated as follows:

1. Verification - for hearing protection type / NRR

2. Median imputation - for hearing protection type / NRR

3. Removal - when critical variables were absent (e.g., exposure level, % dose)

```{r}

library(dplyr) # required prior to use functions in dplyr package

noisedf1 <- tbl_df(noisedf) # pass your data frame using tbl_df function (e.g., noisedf)

gsub() # use to convert factor to integer by replacing characters (e.g., "$", "%"")

```

```{r}


#explore as.tibble function as replacement to tbl_df function

#use select() function to select variable (column) of interest within the dataframe

noisepeak <- select(noisedf1, bu, oeltype) #as example

noisemax <- select(noisedf1, bu, oeltype)

noisetwa <- select(noisedf1, bu, oeltype)

#use filter() function to select subset of column

peak_bu <- filter(noisepeak, oeltype == "peak_db")

max_bu < filter(noisepeak, oeltype == "stel_dba")

#break up your dataset into groups of rows based on
#the values of one or more variables. The group_by() function is reponsible for doing this.

group_by(noisedf, oeltype = peak_dB)

summarize(by_bu, mean(oeltype))


```


Descriptive Data Analysis
...

Statistical Inferences

Exploratory Data Analysis (Visual)

Learn R using Swirl
```{r}
library(swirl)
install_course("Getting and Cleaning Data")
swirl()

```

# Version control using GitHub

```{r}
#You cannot push anything that hasn't been committed yet. The order of operations is:

#1. Make your change.
# git add - this stages your changes for committing
# git commit - this commits your staged changes locally
# git push - this pushes your committed changes to a remote

```

# Reference

1. Swirl
2. R
3. R Studio

# Other useful codes

```{r}
getwd() # to confirm working directory for the project

setwd() # to set working directory when required

setwd("/Users/alifffirdausmy/Documents/GitHub/noiseproR") # working directory for this project

```


